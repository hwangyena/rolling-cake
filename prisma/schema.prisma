generator client {
  provider = "prisma-client-js"
  output = "./"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Cake {
  id         BigInt      @id @default(autoincrement())
  letterId   BigInt?
  cakeType   CakeType?
  Letter     Letter?     @relation(fields: [letterId], references: [id], onDelete: Cascade, onUpdate: NoAction)
  CustomCake CustomCake?
}

model CustomCake {
  id               BigInt     @id @default(autoincrement())
  shape            CakeShape?
  color            String
  top_decorator    Json
  bottom_decorator Json
  lettering        Json
  item             String[]
  Cake             Cake       @relation(fields: [id], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

model Letter {
  id         BigInt   @id @default(autoincrement())
  userId     BigInt?
  created_at DateTime @default(now()) @db.Timestamptz(6)
  name       String
  content    String?
  is_private Boolean
  Cake       Cake[]
  User       User?    @relation(fields: [userId], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

model User {
  id     BigInt   @id @default(autoincrement())
  name   String   @default("")
  Letter Letter[]
}

enum CakeItem {
  CANDLE
  BEAR
  CHERRY
  HEART_CANDLE
  CHOCO
}

enum CakeShape {
  ROUND
  SQUARE
  HEART
}

enum CakeType {
  HARRYPOTTER
  ANIMAL
  SOJU
  MONEY
  PLANT
  PRINCESS
}
